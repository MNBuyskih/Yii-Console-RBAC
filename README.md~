#Yii Console RBAC

Это простое консольное приложение, написаное для yii, упрощающее работу с RBAC в этом фреймворке.

###Инсталяция

Скопируйте файл в дирректорию <code>/path/to/your/app/protected/commands</code>

###Help

Чтобы получить полное описание класса, запустите из консоли:

<pre>$ /path/to/your/app/protected/yiic rbac</pre>

##Простой пример использования

*Гость
*Пользователь
*Администратор

Таблица пользователей (пусть будет <code>user</code>) имеет поле `is_admin`. Если значение поля равно 1 - авторизованый пользователь является администратором.

Кроме этого предположим, что вы уже дополнили ваше приложение собственной реализацией класса CWebUser и добавили в него метод getModel, возвращающий модель текущего авторизованного пользователя.

В соответсвии с этими допущениями составим бизнесправило для администратора (не забывайте, что это должно быть полноценное php выражение: "return" - в начале, ";" - в конце):
    return !Yii::app()->user->isGuest && Yii::app()->user->model->is_admin == 1;

Безнес правило для пользователя
    return !Yii::app()->user->isGuest;

Безнес правило для гостя
    return Yii::app()->user->isGuest;

Теперь можно добавить все роли в систему:
    $ cd /path/to/your/app/protected
    $yiic rbac role --name='admin' --description='This is Administrator' --bizRule='return !Yii::app()->user->isGuest && Yii::app()->user->model->is_admin == 1;'
    $yiic rbac role --name='user' --description='This is simple user' --bizRule='return !Yii::app()->user->isGuest;'
    $yiic rbac role --name='guest' --description='This is guest' --bizRule='return Yii::app()->user->isGuest;'
